# Planmap ìˆ˜ì •ì‚¬í•­ ë¦¬ìŠ¤íŠ¸

**ë¶„ì„ ë‚ ì§œ**: 2025-01-21
**í˜„ì¬ ìƒíƒœ**: í•µì‹¬ ê¸°ëŠ¥ ë¯¸ì™„ì„± - Edge ê´€ë¦¬ ì‹œìŠ¤í…œ ì™„ì „ ëˆ„ë½

## ğŸš¨ Critical Issues (ì¦‰ì‹œ ìˆ˜ì • í•„ìš”)

### 1. **Edge API ì™„ì „ ëˆ„ë½**
- **íŒŒì¼**: `/app/api/edges/route.ts` ì¡´ì¬í•˜ì§€ ì•ŠìŒ
- **ë¬¸ì œ**: constants.ts:44ì— ì •ì˜ëœ `/api/edges` ì—”ë“œí¬ì¸íŠ¸ ë¯¸êµ¬í˜„
- **ì˜í–¥**: ë…¸ë“œ ê°„ ì—°ê²°ì„  ìƒì„±/ì €ì¥/ì‚­ì œ ë¶ˆê°€ëŠ¥
- **ìœ„ì¹˜**:
  - `lib/constants.ts:44` - API_ENDPOINTS.EDGES ì •ì˜
  - `components/flow/flow-canvas.tsx:233` - TODO ì£¼ì„ë§Œ ì¡´ì¬

### 2. **Edge ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ëˆ„ë½**
- **íŒŒì¼**: `components/flow/flow-canvas.tsx`
- **ë¬¸ì œ**: onConnect í•¨ìˆ˜ì—ì„œ edge ìƒì„± ì‹œ DB ì €ì¥ ë¡œì§ ì—†ìŒ
- **ì½”ë“œ**:
  ```typescript
  const onConnect = useCallback((params: Connection) => {
    setEdges((eds) => addEdge(params, eds))
    // TODO: Save edge to database  <- ë¯¸êµ¬í˜„
  }, [setEdges])
  ```

### 3. **íƒ€ì… ì•ˆì „ì„± ë¬¸ì œ**
- **íŒŒì¼**: ì—¬ëŸ¬ API ë¼ìš°íŠ¸
- **ë¬¸ì œ**: `(supabase as any)` íŒ¨í„´ìœ¼ë¡œ íƒ€ì… ì²´í¬ ìš°íšŒ
- **ìœ„ì¹˜**:
  - `app/api/mindmaps/[id]/route.ts`
  - `app/api/nodes/route.ts`

## ğŸŸ¡ Important Issues (ë‹¨ê¸° ìˆ˜ì •)

### 4. **ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜**
- **ë¬¸ì œ**: APIì™€ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ê°„ ë¶ˆì¼ì¹˜
- **ì„¸ë¶€ì‚¬í•­**:
  - APIì—ì„œ `description` í•„ë“œ ì‚¬ìš©í•˜ì§€ë§Œ PLAN.md ìŠ¤í‚¤ë§ˆì— ì—†ìŒ
  - nodes í…Œì´ë¸”ì— ì¶”ê°€ëœ ì»¬ëŸ¼ë“¤ì´ ë¬¸ì„œì™€ ë¶ˆì¼ì¹˜

### 5. **ìë™ ì €ì¥ ë¯¸êµ¬í˜„**
- **íŒŒì¼**: `lib/constants.ts`
- **ë¬¸ì œ**: SAVE_SETTINGS ì •ì˜ë˜ì–´ ìˆì§€ë§Œ ì‹¤ì œ êµ¬í˜„ ì—†ìŒ
- **ì„¤ì •**:
  ```typescript
  AUTO_SAVE_INTERVAL: 5 * 60 * 1000, // 5ë¶„ë§ˆë‹¤ ìë™ ì €ì¥
  DEBOUNCE_DELAY: 300,
  ```

### 6. **ì‹¤ì‹œê°„ ë™ê¸°í™” ì¤€ë¹„ ë¶€ì¡±**
- **ìƒíƒœ**: Supabase í´ë¼ì´ì–¸íŠ¸ë§Œ ì„¤ì •ë¨
- **ëˆ„ë½**: Realtime êµ¬ë… ì„¤ì • ë° ìƒíƒœ ë™ê¸°í™” ë¡œì§

## ğŸŸ¢ Nice to Have (ì¥ê¸° ê°œì„ )

### 7. **ì—ëŸ¬ í•¸ë“¤ë§ ë¶€ì¡±**
- API ë¼ìš°íŠ¸ì—ì„œ ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ ì—†ìŒ
- í”„ë¡ íŠ¸ì—”ë“œ ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬ ë¯¸í¡

### 8. **ì„±ëŠ¥ ìµœì í™” ê¸°íšŒ**
- React Flow ìƒíƒœ ê´€ë¦¬ ìµœì í™” ê°€ëŠ¥
- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°œìƒ ê°€ëŠ¥ì„±

## ğŸ“‹ ìˆ˜ì • ìš°ì„ ìˆœìœ„ ë° ì‘ì—… ê³„íš

### Phase 1: í•µì‹¬ ê¸°ëŠ¥ ë³µêµ¬ (Critical)
1. **Edge API êµ¬í˜„** âš¡
   - `/app/api/edges/route.ts` ìƒì„±
   - CRUD ì‘ì—… êµ¬í˜„ (POST, GET, PUT, DELETE)
   - Supabase edges í…Œì´ë¸” ì—°ë™

2. **Edge ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„** âš¡
   - `flow-canvas.tsx`ì˜ onConnectì—ì„œ DB ì €ì¥ ë¡œì§ ì¶”ê°€
   - Edge ì‚­ì œ ì‹œ DBì—ì„œ ì œê±° ë¡œì§ ì¶”ê°€

3. **íƒ€ì… ì•ˆì „ì„± ë³µêµ¬** âš¡
   - `as any` ì œê±°
   - ì ì ˆí•œ íƒ€ì… ê°€ë“œ ë° ì—ëŸ¬ í•¸ë“¤ë§ ì¶”ê°€

### Phase 2: ë°ì´í„° ì •í•©ì„± (Important)
4. **ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”**
   - APIì™€ DB ìŠ¤í‚¤ë§ˆ ì¼ì¹˜ì‹œí‚¤ê¸°
   - íƒ€ì… ì •ì˜ ì •í™•ì„± í™•ë³´

5. **ìë™ ì €ì¥ êµ¬í˜„**
   - Debounce ë¡œì§ìœ¼ë¡œ ìë™ ì €ì¥ êµ¬í˜„
   - ë³€ê²½ì‚¬í•­ ì¶”ì  ë° ë°°ì¹˜ ì €ì¥

### Phase 3: ì‹¤ì‹œê°„ ê¸°ëŠ¥ ì¤€ë¹„ (Important)
6. **Realtime ê¸°ë°˜ êµ¬ì¡° ì„¤ê³„**
   - Supabase Realtime ì±„ë„ ì„¤ì •
   - ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™” ë¡œì§ êµ¬í˜„

## ğŸ” ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

ê° ìˆ˜ì •ì‚¬í•­ ì™„ë£Œ í›„ í™•ì¸:

- [ ] Edge ìƒì„±/ì‚­ì œê°€ UIì™€ DBì—ì„œ ë™ê¸°í™”ë¨
- [ ] íƒ€ì… ì—ëŸ¬ 0ê°œ (npm run type-check)
- [ ] API ì‘ë‹µì´ ì¼ê´€ëœ í˜•ì‹
- [ ] ìë™ ì €ì¥ì´ ì„¤ì •ëœ ê°„ê²©ìœ¼ë¡œ ì‘ë™
- [ ] í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ëª¨ë“  ë°ì´í„° ë³µì›ë¨

## ğŸ“Š í˜„ì¬ êµ¬í˜„ í˜„í™©

| ê¸°ëŠ¥ | ìƒíƒœ | ì™„ì„±ë„ |
|------|------|--------|
| ì¸ì¦ ì‹œìŠ¤í…œ | âœ… ì™„ë£Œ | 100% |
| Mindmap CRUD | âœ… ì™„ë£Œ | 100% |
| Node CRUD | âš ï¸ ë¶€ë¶„ ì™„ë£Œ | 80% |
| **Edge CRUD** | âŒ **ë¯¸êµ¬í˜„** | **0%** |
| React Flow ê¸°ë³¸ | âœ… ì™„ë£Œ | 90% |
| ìë™ ì €ì¥ | âŒ ë¯¸êµ¬í˜„ | 0% |
| ì‹¤ì‹œê°„ ë™ê¸°í™” | âŒ ë¯¸êµ¬í˜„ | 0% |

**ì „ì²´ í”„ë¡œì íŠ¸ ì™„ì„±ë„: 60%**

---

**ë‹¤ìŒ ì‘ì—…**: Edge API êµ¬í˜„ë¶€í„° ì‹œì‘í•˜ì—¬ Phase 1 ì™„ë£Œ í›„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸